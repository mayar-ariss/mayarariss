var width,height,docH,mouse,smoothScroll,landing=!0,isMobile=!1,headerOn=!1,$root="/";function rand(e,t){return Math.floor(Math.random()*(t-e+1)+e)}$((function(){var e={init:function(){$(window).resize((function(t){e.sizeSet()})),$(document).ready((function(t){$html=t("html"),$body=t("body"),$header=t("header"),$selected=t("#selected-projects"),$discover=t("#discover-images"),e.sizeSet(),t(".project-title").hover((function(){var e=t(this).parent().parent(),o=e.find(".video").css("visibility","visible"),n=e.offset().top-t(window).scrollTop()+e.outerHeight()/2;e.addClass("hover");var i=t("video",e);0<i.length&&i.get(0).play(),TweenLite.fromTo(o,18,{top:n,x:"-1%",rotation:rand(-35,-20),force3D:!0},{top:n,x:"301%",rotation:rand(30,60),force3D:!0,ease:SlowMo.ease.config(.95,.72,!1),onComplete:function(){o.css("visibility","hidden")}})}),(function(){var e=t(this).parent().parent(),o=e.find(".video"),n=t("video",e);0<n.length&&(n.get(0).currentTime=0,n.get(0).pause()),e.removeClass("hover"),TweenLite.to(o,.4,{x:"310%",rotation:rand(30,60),force3D:!0,ease:Power2.easeIn,onComplete:function(){o.css("visibility","hidden")}})})),t("#landing").click((function(t){t.preventDefault(),e.landingShown(!0)})),isMobile?$body.addClass("landingShown"):t("#landing").bind("mousewheel",(function(t){landing&&t.originalEvent.wheelDelta<-10&&e.landingShown()})),t("span[data-target]").click((function(){e.discover(t(this).data("target"))})),t(document).bind("keyup",(function(t){var o=t.keyCode||t.which;49==o&&e.discover(1),50==o&&e.discover(2),51==o&&e.discover(3)})),t(window).load((function(){t(".loader").fadeOut("fast",(function(){isMobile||setTimeout((function(){e.landingShown()}),1300),TweenLite.to("#el2",0,{scaleY:0,autoAlpha:1,transformOrigin:"center"}),TweenLite.to("#el2",3,{scaleY:1,rotation:-15,transformOrigin:"center",ease:Expo.easeOut})}))})),smoothScroll=new SmoothScroll("a[data-scroll]",{speed:1500,easing:"easeInOutCubic"}),t(window).scroll((function(e){t(window).scrollTop()>height/1.9?headerOn||($header.addClass("visible"),headerOn=!0):headerOn&&($header.removeClass("visible"),headerOn=!1)}))}))},landingShown:function(e){(landing||e)&&(landing=!1,document.querySelector("#selected-projects"),smoothScroll.animateScroll(height/1.3),setTimeout((function(){$body.addClass("landingShown")}),1500))},discover:function(e){var t=discover[e-1];if(0<t.length){var o=t.rand(),n=(rand(10,33),$('<img class="discover-item" src="'+o+'" height="60%">').appendTo($discover));n.load((function(){TweenLite.fromTo($(this),1.5,{autoAlpha:1,left:rand(width/6,width-$(this).outerWidth()/2),rotation:rand(-20,20),force3D:!0},{top:"50%",rotation:rand(-10,10),force3D:!0,ease:Expo.easeOut,onComplete:function(){TweenLite.to(n,2,{top:"130%",rotation:rand(-20,20),force3D:!0,ease:Expo.easeIn,onComplete:function(){n.remove()}})}})}))}},sizeSet:function(){width=$(window).width(),height=$(window).height(),docH=$(document).height(),(width<=770||Modernizr.touch)&&(isMobile=!0),isMobile&&770<=width&&(isMobile=!1)},distortContent:function(){$(window).on("mousewheel DOMMouseScroll",(function(e){var t=e.originalEvent.wheelDelta/120||-e.originalEvent.detail/3;console.log(t),TweenMax.to($("#selected-projects"),.7,{skewY:10*t,transformOrigin:"center",ease:Power1.easeOut,overwrite:5})}))},goIndex:function(){History.pushState({type:"index"},$sitetitle,window.location.origin+$root)},loadContent:function(e,t){$.ajax({url:e,success:function(e){$(t).html(e)}})},deferImages:function(){for(var e=document.getElementsByTagName("video"),t=0;t<e.length;t++)e[t].getAttribute("data-poster")&&e[t].setAttribute("poster",e[t].getAttribute("data-src"))}};e.init()})),Array.prototype.rand=function(){return this[Math.floor(Math.random()*this.length)]};